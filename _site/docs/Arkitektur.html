<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Arkitektur | dadaPipes </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Arkitektur | dadaPipes ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/dadaPipes/dadapipes.github.io/blob/main/docs/Arkitektur.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/pair-of-socks-50.png" alt="dadaPipes">
            dadaPipes
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="arkitektur">Arkitektur</h1>

<p>2 populÃ¦re arkitekturer der bliver brugt i .NET til webudvikling er Clean Architectur (lagdelt arkitektur) og Vertical Slice Architecture (VSA).</p>
<p>Jeg tager udgangspunkt i en API uden et klient (UI) projekt, men har stadig et 'Shared' projekt, for at kunne dele data i C# for bÃ¥de Klient og Server projekterne.</p>
<div class="tabGroup" id="tabgroup_1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_1_lag-delt-arkitektur" role="tab" aria-controls="tabpanel_1_lag-delt-arkitektur" data-tab="lag-delt-arkitektur" tabindex="0" aria-selected="true">Lag delt arkitektur</a>
</li>
<li role="presentation">
<a href="#tabpanel_1_vertical-slice-arkitektur" role="tab" aria-controls="tabpanel_1_vertical-slice-arkitektur" data-tab="vertical-slice-arkitektur" tabindex="-1">Vertical Slice Arkitektur</a>
</li>
</ul>
<section id="tabpanel_1_lag-delt-arkitektur" role="tabpanel" data-tab="lag-delt-arkitektur">

<p>I en lagdelt arkitektur har man forskellige, typisk separeret af foldere eller projekter.
Det kunne vÃ¦re Applications lag med endpoints/controllers, Data lag med repositories og et domÃ¦ne lag med domÃ¦ne modeler/ entities. Der findes flere forskellige nuancer af lagdelte arkitekturer, men fÃ¦llesnÃ¦vneren er at â€¦.</p>
<p><strong>Fordele</strong><br>
Tydelig adskillelse af ansvar:
Application indeholder forretningslogik.
Infrastructure hÃ¥ndterer tekniske detaljer.
Domain indeholder centrale objekter og regler.</p>
<p>Testbarhed:
Du kan teste UserService uafhÃ¦ngigt af databasen ved at mocke IUserRepository.</p>
<p>Udvidelighed:
Hvis du Ã¸nsker at udskifte EF Core med noget andet, behÃ¸ver du kun Ã¦ndre UserRepository.</p>
<p>Arbejder man pÃ¥ en feature, ved man prÃ¦cis hvordan at den skal skÃ¦res/deles, da hver del af koden har en bestemt plads.
Hele kodebasen er bygget op pÃ¥ den samme mÃ¥de, sÃ¥ det kan fungere som bander pÃ¥ en bowlingbane. Man holder sig inden for banen og skyder ikke ved siden af. Det kan give en mere ensartet kode, hvor man kender flowet pÃ¥ forhÃ¥nd.
Ofte fÃ¸lger denne form for arkitektur SOLID principels og DRY til hvert punktum og komma.
De forskellige lag i applikationen kan nemt skiftes ud, da der er en lÃ¸s kobling mellem lagene og brugen af interfaces typisk er hÃ¸j, hvilket ogsÃ¥ gÃ¸r det nemt at unit teste enkelte metoder.
Hvis et af mÃ¥lene er at man nemt kan skifte et lag ud, skal alle dele i det lag have et interface og unit testes.
Derved opnÃ¥r man ikke kun at kontrakten mellem interface og implementiering overholdes, men ogsÃ¥ at omplementeringen af interfacet overholder kravene, da alle unit tests skal bestÃ¥, og man sikrer sig dermed at det er implementeret korrekt.</p>
<p><strong>Ulemper</strong><br>
Man er tvunget til at dele meget simpel kode ud pÃ¥ flere forskellige filer.
Koden er lÃ¥st fast i det samme mÃ¸nster igennem hele applikationen, allerede inden at man skriver det fÃ¸rste stykke kode.
Nogle arktitekturer deler lagene med projekter frem for foldere, for at gÃ¸re det nemmere at skifte de forskellige lag ud, i tilfÃ¦lde af at man skulle fÃ¥ brug for det engang i fremtiden.
Et typisk argument i .NET er at man nemmere kan skifte databasen ud med en anden, hvis man bruger repositories og interfaces for de selv samme repositories. Men Microsoft har udviklet en ORM (EF Core) som virker som et repository via DbContext, og den kan bruges pÃ¥ mange forskellige databaser.
HÃ¸j brug af interfaces og unit tests, hvilket gÃ¸r det tidskrÃ¦vende at implementere koden og samtidigt gÃ¸r koden mere kompleks.</p>
<p>Pull requests: Det bliver mere uoverskueligt at gÃ¥ igennem opdatering af kode der er skubbet til github og fÃ¥ et overblik og de dele af koden der er Ã¦ndret. PÃ¥ samme mÃ¥de er det ogsÃ¥ mere komplekst at godkende en pull request.</p>
<h4 id="clean-architecture-eksempel">Clean Architecture eksempel</h4>
<p><img src="https://elitecsoft.com/wp-content/uploads/2023/03/Clean-Architecture-DDD.jpg" alt="clean architecture diagram"></p>
<h5 id="mappestruktur">Mappestruktur</h5>
<h6 id="clean-architectur-interactive-server">Clean Architectur interactive server</h6>
<pre><code class="lang-mermaid">block-beta
  columns 3
  afhdgjyfkigloydl,iydi:3
  block:group1:2
    columns 2
    h i j k
  end
  g
  block:group2:3
    %% columns auto (default)
    leoopl megsrgsrg srgsrgn srgsrgo srgsrgp srgq sgrr
  end
</code></pre>
<div class="lang-plantUml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="CLASS" height="518px" preserveaspectratio="none" style="width:1085px;height:518px;background:#FFFFFF;" version="1.1" viewbox="0 0 1085 518" width="1085px" zoomandpan="magnify"><defs></defs><g><!--cluster Server--><g id="cluster_Server"><path d="M8.5,6 L61.5078,6 A3.75,3.75 0 0 1 64.0078,8.5 L71.0078,28.2969 L633.5,28.2969 A2.5,2.5 0 0 1 636,30.7969 L636,508.5 A2.5,2.5 0 0 1 633.5,511 L8.5,511 A2.5,2.5 0 0 1 6,508.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"></path><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="71.0078" y1="28.2969" y2="28.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="52.0078" x="10" y="20.9951">Server</text></g><!--cluster FeatureOne--><g id="cluster_FeatureOne"><path d="M32.5,49 L126.4277,49 A3.75,3.75 0 0 1 128.9277,51.5 L135.9277,71.2969 L201.5,71.2969 A2.5,2.5 0 0 1 204,73.7969 L204,361.5 A2.5,2.5 0 0 1 201.5,364 L32.5,364 A2.5,2.5 0 0 1 30,361.5 L30,51.5 A2.5,2.5 0 0 1 32.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"></path><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="135.9277" y1="71.2969" y2="71.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="92.9277" x="34" y="63.9951">FeatureOne</text></g><!--cluster FeatureTwo--><g id="cluster_FeatureTwo"><path d="M230.5,49 L325.166,49 A3.75,3.75 0 0 1 327.666,51.5 L334.666,71.2969 L399.5,71.2969 A2.5,2.5 0 0 1 402,73.7969 L402,361.5 A2.5,2.5 0 0 1 399.5,364 L230.5,364 A2.5,2.5 0 0 1 228,361.5 L228,51.5 A2.5,2.5 0 0 1 230.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"></path><line style="stroke:#000000;stroke-width:1.5;" x1="228" x2="334.666" y1="71.2969" y2="71.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="93.666" x="232" y="63.9951">FeatureTwo</text></g><!--cluster FeatureThree--><g id="cluster_FeatureThree"><path d="M428.5,49 L536.4756,49 A3.75,3.75 0 0 1 538.9756,51.5 L545.9756,71.2969 L609.5,71.2969 A2.5,2.5 0 0 1 612,73.7969 L612,484.5 A2.5,2.5 0 0 1 609.5,487 L428.5,487 A2.5,2.5 0 0 1 426,484.5 L426,51.5 A2.5,2.5 0 0 1 428.5,49 " fill="none" style="stroke:#000000;stroke-width:1.5;"></path><line style="stroke:#000000;stroke-width:1.5;" x1="426" x2="545.9756" y1="71.2969" y2="71.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="106.9756" x="430" y="63.9951">FeatureThree</text></g><!--cluster Domain--><g id="cluster_Domain"><path d="M662.5,388 L723.54,388 A3.75,3.75 0 0 1 726.04,390.5 L733.04,410.2969 L1075.5,410.2969 A2.5,2.5 0 0 1 1078,412.7969 L1078,484.5 A2.5,2.5 0 0 1 1075.5,487 L662.5,487 A2.5,2.5 0 0 1 660,484.5 L660,390.5 A2.5,2.5 0 0 1 662.5,388 " fill="none" style="stroke:#000000;stroke-width:1.5;"></path><line style="stroke:#000000;stroke-width:1.5;" x1="660" x2="733.04" y1="410.2969" y2="410.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthadjust="spacing" textlength="60.04" x="664" y="402.9951">Domain</text></g><!--class ComponentOne--><g id="elem_ComponentOne"><rect codeline="4" fill="#F1F1F1" height="48" id="ComponentOne" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.7852" x="46.11" y="84"></rect><ellipse cx="61.11" cy="100" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M64.0788,105.6406 Q63.5006,105.9375 62.86,106.0781 Q62.2194,106.2344 61.5163,106.2344 Q59.0163,106.2344 57.6881,104.5938 Q56.3756,102.9375 56.3756,99.8125 Q56.3756,96.6875 57.6881,95.0313 Q59.0163,93.375 61.5163,93.375 Q62.2194,93.375 62.86,93.5313 Q63.5163,93.6875 64.0788,93.9844 L64.0788,96.7031 Q63.4538,96.125 62.86,95.8594 Q62.2663,95.5781 61.6413,95.5781 Q60.2975,95.5781 59.61,96.6563 Q58.9225,97.7188 58.9225,99.8125 Q58.9225,101.9063 59.61,102.9844 Q60.2975,104.0469 61.6413,104.0469 Q62.2663,104.0469 62.86,103.7813 Q63.4538,103.5 64.0788,102.9219 L64.0788,105.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="109.7852" x="75.11" y="104.8467">ComponentOne</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.11" x2="186.8952" y1="116" y2="116"></line><line style="stroke:#181818;stroke-width:0.5;" x1="47.11" x2="186.8952" y1="124" y2="124"></line></g><!--class ViewModelOne--><g id="elem_ViewModelOne"><rect codeline="5" fill="#F1F1F1" height="48" id="ViewModelOne" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.0703" x="49.96" y="192"></rect><ellipse cx="64.96" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M67.9288,213.6406 Q67.3506,213.9375 66.71,214.0781 Q66.0694,214.2344 65.3663,214.2344 Q62.8663,214.2344 61.5381,212.5938 Q60.2256,210.9375 60.2256,207.8125 Q60.2256,204.6875 61.5381,203.0313 Q62.8663,201.375 65.3663,201.375 Q66.0694,201.375 66.71,201.5313 Q67.3663,201.6875 67.9288,201.9844 L67.9288,204.7031 Q67.3038,204.125 66.71,203.8594 Q66.1163,203.5781 65.4913,203.5781 Q64.1475,203.5781 63.46,204.6563 Q62.7725,205.7188 62.7725,207.8125 Q62.7725,209.9063 63.46,210.9844 Q64.1475,212.0469 65.4913,212.0469 Q66.1163,212.0469 66.71,211.7813 Q67.3038,211.5 67.9288,210.9219 L67.9288,213.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="104.0703" x="78.96" y="212.8467">ViewModelOne</text><line style="stroke:#181818;stroke-width:0.5;" x1="50.96" x2="185.0303" y1="224" y2="224"></line><line style="stroke:#181818;stroke-width:0.5;" x1="50.96" x2="185.0303" y1="232" y2="232"></line></g><!--class ServiceOne--><g id="elem_ServiceOne"><rect codeline="6" fill="#F1F1F1" height="48" id="ServiceOne" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.2471" x="68.88" y="300"></rect><ellipse cx="83.88" cy="316" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M86.8488,321.6406 Q86.2706,321.9375 85.63,322.0781 Q84.9894,322.2344 84.2863,322.2344 Q81.7863,322.2344 80.4581,320.5938 Q79.1456,318.9375 79.1456,315.8125 Q79.1456,312.6875 80.4581,311.0313 Q81.7863,309.375 84.2863,309.375 Q84.9894,309.375 85.63,309.5313 Q86.2863,309.6875 86.8488,309.9844 L86.8488,312.7031 Q86.2238,312.125 85.63,311.8594 Q85.0363,311.5781 84.4113,311.5781 Q83.0675,311.5781 82.38,312.6563 Q81.6925,313.7188 81.6925,315.8125 Q81.6925,317.9063 82.38,318.9844 Q83.0675,320.0469 84.4113,320.0469 Q85.0363,320.0469 85.63,319.7813 Q86.2238,319.5 86.8488,318.9219 L86.8488,321.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="80.2471" x="97.88" y="320.8467">ServiceOne</text><line style="stroke:#181818;stroke-width:0.5;" x1="69.88" x2="180.1271" y1="332" y2="332"></line><line style="stroke:#181818;stroke-width:0.5;" x1="69.88" x2="180.1271" y1="340" y2="340"></line></g><!--class ComponentTwo--><g id="elem_ComponentTwo"><rect codeline="9" fill="#F1F1F1" height="48" id="ComponentTwo" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141.8467" x="244.08" y="84"></rect><ellipse cx="259.08" cy="100" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M262.0488,105.6406 Q261.4706,105.9375 260.83,106.0781 Q260.1894,106.2344 259.4863,106.2344 Q256.9863,106.2344 255.6581,104.5938 Q254.3456,102.9375 254.3456,99.8125 Q254.3456,96.6875 255.6581,95.0313 Q256.9863,93.375 259.4863,93.375 Q260.1894,93.375 260.83,93.5313 Q261.4863,93.6875 262.0488,93.9844 L262.0488,96.7031 Q261.4238,96.125 260.83,95.8594 Q260.2363,95.5781 259.6113,95.5781 Q258.2675,95.5781 257.58,96.6563 Q256.8925,97.7188 256.8925,99.8125 Q256.8925,101.9063 257.58,102.9844 Q258.2675,104.0469 259.6113,104.0469 Q260.2363,104.0469 260.83,103.7813 Q261.4238,103.5 262.0488,102.9219 L262.0488,105.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="109.8467" x="273.08" y="104.8467">ComponentTwo</text><line style="stroke:#181818;stroke-width:0.5;" x1="245.08" x2="384.9267" y1="116" y2="116"></line><line style="stroke:#181818;stroke-width:0.5;" x1="245.08" x2="384.9267" y1="124" y2="124"></line></g><!--class ViewModelTwo--><g id="elem_ViewModelTwo"><rect codeline="10" fill="#F1F1F1" height="48" id="ViewModelTwo" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136.1318" x="246.93" y="192"></rect><ellipse cx="261.93" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M264.8988,213.6406 Q264.3206,213.9375 263.68,214.0781 Q263.0394,214.2344 262.3363,214.2344 Q259.8363,214.2344 258.5081,212.5938 Q257.1956,210.9375 257.1956,207.8125 Q257.1956,204.6875 258.5081,203.0313 Q259.8363,201.375 262.3363,201.375 Q263.0394,201.375 263.68,201.5313 Q264.3363,201.6875 264.8988,201.9844 L264.8988,204.7031 Q264.2738,204.125 263.68,203.8594 Q263.0863,203.5781 262.4613,203.5781 Q261.1175,203.5781 260.43,204.6563 Q259.7425,205.7188 259.7425,207.8125 Q259.7425,209.9063 260.43,210.9844 Q261.1175,212.0469 262.4613,212.0469 Q263.0863,212.0469 263.68,211.7813 Q264.2738,211.5 264.8988,210.9219 L264.8988,213.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="104.1318" x="275.93" y="212.8467">ViewModelTwo</text><line style="stroke:#181818;stroke-width:0.5;" x1="247.93" x2="382.0618" y1="224" y2="224"></line><line style="stroke:#181818;stroke-width:0.5;" x1="247.93" x2="382.0618" y1="232" y2="232"></line></g><!--class ServiceTwo--><g id="elem_ServiceTwo"><rect codeline="11" fill="#F1F1F1" height="48" id="ServiceTwo" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.3086" x="258.85" y="300"></rect><ellipse cx="273.85" cy="316" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M276.8188,321.6406 Q276.2406,321.9375 275.6,322.0781 Q274.9594,322.2344 274.2563,322.2344 Q271.7563,322.2344 270.4281,320.5938 Q269.1156,318.9375 269.1156,315.8125 Q269.1156,312.6875 270.4281,311.0313 Q271.7563,309.375 274.2563,309.375 Q274.9594,309.375 275.6,309.5313 Q276.2563,309.6875 276.8188,309.9844 L276.8188,312.7031 Q276.1938,312.125 275.6,311.8594 Q275.0063,311.5781 274.3813,311.5781 Q273.0375,311.5781 272.35,312.6563 Q271.6625,313.7188 271.6625,315.8125 Q271.6625,317.9063 272.35,318.9844 Q273.0375,320.0469 274.3813,320.0469 Q275.0063,320.0469 275.6,319.7813 Q276.1938,319.5 276.8188,318.9219 L276.8188,321.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="80.3086" x="287.85" y="320.8467">ServiceTwo</text><line style="stroke:#181818;stroke-width:0.5;" x1="259.85" x2="370.1586" y1="332" y2="332"></line><line style="stroke:#181818;stroke-width:0.5;" x1="259.85" x2="370.1586" y1="340" y2="340"></line></g><!--class ComponentThree--><g id="elem_ComponentThree"><rect codeline="14" fill="#F1F1F1" height="48" id="ComponentThree" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.6865" x="442.16" y="84"></rect><ellipse cx="457.16" cy="100" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M460.1288,105.6406 Q459.5506,105.9375 458.91,106.0781 Q458.2694,106.2344 457.5663,106.2344 Q455.0663,106.2344 453.7381,104.5938 Q452.4256,102.9375 452.4256,99.8125 Q452.4256,96.6875 453.7381,95.0313 Q455.0663,93.375 457.5663,93.375 Q458.2694,93.375 458.91,93.5313 Q459.5663,93.6875 460.1288,93.9844 L460.1288,96.7031 Q459.5038,96.125 458.91,95.8594 Q458.3163,95.5781 457.6913,95.5781 Q456.3475,95.5781 455.66,96.6563 Q454.9725,97.7188 454.9725,99.8125 Q454.9725,101.9063 455.66,102.9844 Q456.3475,104.0469 457.6913,104.0469 Q458.3163,104.0469 458.91,103.7813 Q459.5038,103.5 460.1288,102.9219 L460.1288,105.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="121.6865" x="471.16" y="104.8467">ComponentThree</text><line style="stroke:#181818;stroke-width:0.5;" x1="443.16" x2="594.8465" y1="116" y2="116"></line><line style="stroke:#181818;stroke-width:0.5;" x1="443.16" x2="594.8465" y1="124" y2="124"></line></g><!--class ViewModelThree--><g id="elem_ViewModelThree"><rect codeline="15" fill="#F1F1F1" height="48" id="ViewModelThree" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.9717" x="445.01" y="192"></rect><ellipse cx="460.01" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M462.9788,213.6406 Q462.4006,213.9375 461.76,214.0781 Q461.1194,214.2344 460.4163,214.2344 Q457.9163,214.2344 456.5881,212.5938 Q455.2756,210.9375 455.2756,207.8125 Q455.2756,204.6875 456.5881,203.0313 Q457.9163,201.375 460.4163,201.375 Q461.1194,201.375 461.76,201.5313 Q462.4163,201.6875 462.9788,201.9844 L462.9788,204.7031 Q462.3538,204.125 461.76,203.8594 Q461.1663,203.5781 460.5413,203.5781 Q459.1975,203.5781 458.51,204.6563 Q457.8225,205.7188 457.8225,207.8125 Q457.8225,209.9063 458.51,210.9844 Q459.1975,212.0469 460.5413,212.0469 Q461.1663,212.0469 461.76,211.7813 Q462.3538,211.5 462.9788,210.9219 L462.9788,213.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="115.9717" x="474.01" y="212.8467">ViewModelThree</text><line style="stroke:#181818;stroke-width:0.5;" x1="446.01" x2="591.9817" y1="224" y2="224"></line><line style="stroke:#181818;stroke-width:0.5;" x1="446.01" x2="591.9817" y1="232" y2="232"></line></g><!--class ServiceThree--><g id="elem_ServiceThree"><rect codeline="16" fill="#F1F1F1" height="48" id="ServiceThree" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.1484" x="456.93" y="300"></rect><ellipse cx="471.93" cy="316" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M474.8988,321.6406 Q474.3206,321.9375 473.68,322.0781 Q473.0394,322.2344 472.3363,322.2344 Q469.8363,322.2344 468.5081,320.5938 Q467.1956,318.9375 467.1956,315.8125 Q467.1956,312.6875 468.5081,311.0313 Q469.8363,309.375 472.3363,309.375 Q473.0394,309.375 473.68,309.5313 Q474.3363,309.6875 474.8988,309.9844 L474.8988,312.7031 Q474.2738,312.125 473.68,311.8594 Q473.0863,311.5781 472.4613,311.5781 Q471.1175,311.5781 470.43,312.6563 Q469.7425,313.7188 469.7425,315.8125 Q469.7425,317.9063 470.43,318.9844 Q471.1175,320.0469 472.4613,320.0469 Q473.0863,320.0469 473.68,319.7813 Q474.2738,319.5 474.8988,318.9219 L474.8988,321.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="92.1484" x="485.93" y="320.8467">ServiceThree</text><line style="stroke:#181818;stroke-width:0.5;" x1="457.93" x2="580.0784" y1="332" y2="332"></line><line style="stroke:#181818;stroke-width:0.5;" x1="457.93" x2="580.0784" y1="340" y2="340"></line></g><!--class RepoThree--><g id="elem_RepoThree"><rect codeline="17" fill="#F1F1F1" height="48" id="RepoThree" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.2002" x="464.9" y="423"></rect><ellipse cx="479.9" cy="439" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M482.8688,444.6406 Q482.2906,444.9375 481.65,445.0781 Q481.0094,445.2344 480.3063,445.2344 Q477.8063,445.2344 476.4781,443.5938 Q475.1656,441.9375 475.1656,438.8125 Q475.1656,435.6875 476.4781,434.0313 Q477.8063,432.375 480.3063,432.375 Q481.0094,432.375 481.65,432.5313 Q482.3063,432.6875 482.8688,432.9844 L482.8688,435.7031 Q482.2438,435.125 481.65,434.8594 Q481.0563,434.5781 480.4313,434.5781 Q479.0875,434.5781 478.4,435.6563 Q477.7125,436.7188 477.7125,438.8125 Q477.7125,440.9063 478.4,441.9844 Q479.0875,443.0469 480.4313,443.0469 Q481.0563,443.0469 481.65,442.7813 Q482.2438,442.5 482.8688,441.9219 L482.8688,444.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="76.2002" x="493.9" y="443.8467">RepoThree</text><line style="stroke:#181818;stroke-width:0.5;" x1="465.9" x2="572.1002" y1="455" y2="455"></line><line style="stroke:#181818;stroke-width:0.5;" x1="465.9" x2="572.1002" y1="463" y2="463"></line></g><!--class EntityOne--><g id="elem_EntityOne"><rect codeline="22" fill="#F1F1F1" height="48" id="EntityOne" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.3779" x="676.31" y="423"></rect><ellipse cx="691.31" cy="439" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M694.2788,444.6406 Q693.7006,444.9375 693.06,445.0781 Q692.4194,445.2344 691.7163,445.2344 Q689.2163,445.2344 687.8881,443.5938 Q686.5756,441.9375 686.5756,438.8125 Q686.5756,435.6875 687.8881,434.0313 Q689.2163,432.375 691.7163,432.375 Q692.4194,432.375 693.06,432.5313 Q693.7163,432.6875 694.2788,432.9844 L694.2788,435.7031 Q693.6538,435.125 693.06,434.8594 Q692.4663,434.5781 691.8413,434.5781 Q690.4975,434.5781 689.81,435.6563 Q689.1225,436.7188 689.1225,438.8125 Q689.1225,440.9063 689.81,441.9844 Q690.4975,443.0469 691.8413,443.0469 Q692.4663,443.0469 693.06,442.7813 Q693.6538,442.5 694.2788,441.9219 L694.2788,444.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="69.3779" x="705.31" y="443.8467">EntityOne</text><line style="stroke:#181818;stroke-width:0.5;" x1="677.31" x2="776.6879" y1="455" y2="455"></line><line style="stroke:#181818;stroke-width:0.5;" x1="677.31" x2="776.6879" y1="463" y2="463"></line></g><!--class EntityTwo--><g id="elem_EntityTwo"><rect codeline="23" fill="#F1F1F1" height="48" id="EntityTwo" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.4395" x="812.28" y="423"></rect><ellipse cx="827.28" cy="439" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M830.2488,444.6406 Q829.6706,444.9375 829.03,445.0781 Q828.3894,445.2344 827.6863,445.2344 Q825.1863,445.2344 823.8581,443.5938 Q822.5456,441.9375 822.5456,438.8125 Q822.5456,435.6875 823.8581,434.0313 Q825.1863,432.375 827.6863,432.375 Q828.3894,432.375 829.03,432.5313 Q829.6863,432.6875 830.2488,432.9844 L830.2488,435.7031 Q829.6238,435.125 829.03,434.8594 Q828.4363,434.5781 827.8113,434.5781 Q826.4675,434.5781 825.78,435.6563 Q825.0925,436.7188 825.0925,438.8125 Q825.0925,440.9063 825.78,441.9844 Q826.4675,443.0469 827.8113,443.0469 Q828.4363,443.0469 829.03,442.7813 Q829.6238,442.5 830.2488,441.9219 L830.2488,444.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="69.4395" x="841.28" y="443.8467">EntityTwo</text><line style="stroke:#181818;stroke-width:0.5;" x1="813.28" x2="912.7195" y1="455" y2="455"></line><line style="stroke:#181818;stroke-width:0.5;" x1="813.28" x2="912.7195" y1="463" y2="463"></line></g><!--class EntityThree--><g id="elem_EntityThree"><rect codeline="24" fill="#F1F1F1" height="48" id="EntityThree" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.2793" x="948.36" y="423"></rect><ellipse cx="963.36" cy="439" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"></ellipse><path d="M966.3288,444.6406 Q965.7506,444.9375 965.11,445.0781 Q964.4694,445.2344 963.7663,445.2344 Q961.2663,445.2344 959.9381,443.5938 Q958.6256,441.9375 958.6256,438.8125 Q958.6256,435.6875 959.9381,434.0313 Q961.2663,432.375 963.7663,432.375 Q964.4694,432.375 965.11,432.5313 Q965.7663,432.6875 966.3288,432.9844 L966.3288,435.7031 Q965.7038,435.125 965.11,434.8594 Q964.5163,434.5781 963.8913,434.5781 Q962.5475,434.5781 961.86,435.6563 Q961.1725,436.7188 961.1725,438.8125 Q961.1725,440.9063 961.86,441.9844 Q962.5475,443.0469 963.8913,443.0469 Q964.5163,443.0469 965.11,442.7813 Q965.7038,442.5 966.3288,441.9219 L966.3288,444.6406 Z " fill="#000000"></path><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="81.2793" x="977.36" y="443.8467">EntityThree</text><line style="stroke:#181818;stroke-width:0.5;" x1="949.36" x2="1060.6393" y1="455" y2="455"></line><line style="stroke:#181818;stroke-width:0.5;" x1="949.36" x2="1060.6393" y1="463" y2="463"></line></g><!--link ComponentOne to ViewModelOne--><g id="link_ComponentOne_ViewModelOne"><path codeline="27" d="M117.22,132.26 C117.39,149.94 117.5522,168.1303 117.7222,185.7903 " fill="none" id="ComponentOne-to-ViewModelOne" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="117.78,191.79,121.6932,182.7519,117.7319,186.7902,113.6936,182.8289,117.78,191.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ViewModelOne to ServiceOne--><g id="link_ViewModelOne_ServiceOne"><path codeline="28" d="M119.54,240.26 C120.7,257.94 121.9034,276.1431 123.0734,293.8031 " fill="none" id="ViewModelOne-to-ServiceOne" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="123.47,299.79,126.8663,290.5453,123.1395,294.8009,118.8838,291.0741,123.47,299.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ServiceOne to EntityOne--><g id="link_ServiceOne_EntityOne"><path codeline="29" d="M166.23,348.48 C184.54,357.66 206.73,367.14 228,372 C269.61,381.5 570.88,368.58 612,380 C642.83,388.56 669.1468,403.8749 691.2768,419.1949 " fill="none" id="ServiceOne-to-EntityOne" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="696.21,422.61,691.0869,414.1985,692.099,419.764,686.5334,420.7761,696.21,422.61" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ComponentTwo to ViewModelTwo--><g id="link_ComponentTwo_ViewModelTwo"><path codeline="31" d="M315,132.26 C315,149.94 315,168.13 315,185.79 " fill="none" id="ComponentTwo-to-ViewModelTwo" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="315,191.79,319,182.79,315,186.79,311,182.79,315,191.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ViewModelTwo to ServiceTwo--><g id="link_ViewModelTwo_ServiceTwo"><path codeline="32" d="M315,240.26 C315,257.94 315,276.13 315,293.79 " fill="none" id="ViewModelTwo-to-ServiceTwo" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="315,299.79,319,290.79,315,294.79,311,290.79,315,299.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ComponentThree to ViewModelThree--><g id="link_ComponentThree_ViewModelThree"><path codeline="34" d="M519,132.26 C519,149.94 519,168.13 519,185.79 " fill="none" id="ComponentThree-to-ViewModelThree" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="519,191.79,523,182.79,519,186.79,515,182.79,519,191.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ViewModelThree to ServiceThree--><g id="link_ViewModelThree_ServiceThree"><path codeline="35" d="M519,240.26 C519,257.94 519,276.13 519,293.79 " fill="none" id="ViewModelThree-to-ServiceThree" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="519,299.79,523,290.79,519,294.79,515,290.79,519,299.79" style="stroke:#181818;stroke-width:1;"></polygon></g><!--link ServiceThree to RepoThree--><g id="link_ServiceThree_RepoThree"><path codeline="36" d="M519,348.33 C519,369.76 519,395.34 519,416.74 " fill="none" id="ServiceThree-to-RepoThree" style="stroke:#181818;stroke-width:1;"></path><polygon fill="#181818" points="519,422.74,523,413.74,519,417.74,515,413.74,519,422.74" style="stroke:#181818;stroke-width:1;"></polygon></g><!--SRC=[TP3B3e8m44Nt_Oe9Utx1ZO-TCL7ZlgaJROIsALLY3Fzk7u8TKdRCkN3kC8QB1xyXL2UqBxGLV1Y06U4EkNjQF2XC0O1eUDV1MhT6ArJE9nc-IEpt-eeDnK4j1IOu5FpdNY_uVLBoK_pp9rZqtoqk_K7CYXspO6oPuICQFRA13OnDvHlTSgbIRNftgvnqxtI7dAJD2Ob6Ryil3NMz8ZS6HgOGPxV-FyPaAeVCwfkfDQoI3xaqP8mURlPnt9gEH1018rE8fnj-0G00]--></g></svg></div>
<h6 id="clean-architectur-interactive-webassembly">Clean Architectur interactive WebAssembly</h6>
<div class="lang-plantUml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" data-diagram-type="ACTIVITY" height="927px" preserveaspectratio="none" style="width:168px;height:927px;background:#FFFFFF;" version="1.1" viewbox="0 0 168 927" width="168px" zoomandpan="magnify"><defs></defs><g><polygon fill="none" points="20,10,66.5303,10,73.5303,32.2969,146.9326,32.2969,146.9326,305.1875,20,305.1875,20,10" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="20" x2="73.5303" y1="32.2969" y2="32.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="40.5303" x="24" y="24.9951">Client</text><polygon fill="none" points="30,46.2969,122.9326,46.2969,129.9326,68.5938,136.9326,68.5938,136.9326,102.5938,30,102.5938,30,46.2969" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="68.5938" y2="68.5938"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="61.292">Feature One</text><polygon fill="none" points="30,137.5938,122.9326,137.5938,129.9326,159.8906,136.9326,159.8906,136.9326,193.8906,30,193.8906,30,137.5938" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="159.8906" y2="159.8906"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="152.5889">Feature One</text><polygon fill="none" points="30,228.8906,122.9326,228.8906,129.9326,251.1875,136.9326,251.1875,136.9326,285.1875,30,285.1875,30,228.8906" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="251.1875" y2="251.1875"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="243.8857">Feature One</text><polygon fill="none" points="20,315.1875,71.9102,315.1875,78.9102,337.4844,146.9326,337.4844,146.9326,610.375,20,610.375,20,315.1875" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="20" x2="78.9102" y1="337.4844" y2="337.4844"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="45.9102" x="24" y="330.1826">Server</text><polygon fill="none" points="30,351.4844,122.9326,351.4844,129.9326,373.7813,136.9326,373.7813,136.9326,407.7813,30,407.7813,30,351.4844" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="373.7813" y2="373.7813"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="366.4795">Feature One</text><polygon fill="none" points="30,442.7813,122.9326,442.7813,129.9326,465.0781,136.9326,465.0781,136.9326,499.0781,30,499.0781,30,442.7813" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="465.0781" y2="465.0781"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="457.7764">Feature One</text><polygon fill="none" points="30,534.0781,122.9326,534.0781,129.9326,556.375,136.9326,556.375,136.9326,590.375,30,590.375,30,534.0781" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="556.375" y2="556.375"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="549.0732">Feature One</text><polygon fill="none" points="20,620.375,75.5947,620.375,82.5947,642.6719,146.9326,642.6719,146.9326,915.5625,20,915.5625,20,620.375" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="20" x2="82.5947" y1="642.6719" y2="642.6719"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="49.5947" x="24" y="635.3701">Shared</text><polygon fill="none" points="30,656.6719,122.9326,656.6719,129.9326,678.9688,136.9326,678.9688,136.9326,712.9688,30,712.9688,30,656.6719" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="678.9688" y2="678.9688"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="671.667">Feature One</text><polygon fill="none" points="30,747.9688,122.9326,747.9688,129.9326,770.2656,136.9326,770.2656,136.9326,804.2656,30,804.2656,30,747.9688" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="770.2656" y2="770.2656"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="762.9639">Feature One</text><polygon fill="none" points="30,839.2656,122.9326,839.2656,129.9326,861.5625,136.9326,861.5625,136.9326,895.5625,30,895.5625,30,839.2656" style="stroke:#000000;stroke-width:1.5;"></polygon><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="129.9326" y1="861.5625" y2="861.5625"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthadjust="spacing" textlength="86.9326" x="34" y="854.2607">Feature One</text><line style="stroke:#181818;stroke-width:1;" x1="83.4663" x2="83.4663" y1="82.5938" y2="387.7813"></line><line style="stroke:#181818;stroke-width:1;" x1="83.4663" x2="83.4663" y1="387.7813" y2="692.9688"></line><line style="stroke:#181818;stroke-width:1;" x1="83.4663" x2="83.4663" y1="692.9688" y2="875.5625"></line><polygon fill="#181818" points="79.4663,865.5625,83.4663,875.5625,87.4663,865.5625,83.4663,869.5625" style="stroke:#181818;stroke-width:1;"></polygon><!--SRC=[AqXCpavCJrLmpibCpIjHgEPIK2Y02hcb9fQK5gKg-EUbWiLhoPQhvUA2IGQd5fMb5j71dep4ejGKMja30000]--></g></svg></div>
<p>Jeg har inkludered eksempler pÃ¥ klasser i mapperne, for at illustrerer hvordan det ser ud i en meget lille applikation.
Man kan tÃ¦nke sig til hvordan svÃ¦rhedsgraden, i at finde rundt i de forskellige mapper, stiger liniÃ¦rt, i takt med at applikationen vokser.
Ikke kun pÃ¥ grund af antallet af mapper, men ogsÃ¥ pga antallet a filer der er i hver mappe.</p>
<p>I eksemplet har jeg lÃ¦net mig op af High Cohesion/Low Coupling, da relaterede emdpoints er samlet i en UserController, Service metoder er samlet i en UserService osv.
Der er low coupling i mellem lagene, via interfaces.</p>
<p>Fordelen ved at bruge class library projects er at hver del kan have deres egen afhÃ¦ngigheder og er isolerede i det enkelte class library project.
For eksempel er EF Core Nuget pakken isoleret i <strong>Persistence</strong> projektet i <strong>Infrastructure</strong> mappen.</p>
<h5 id="presentation-mappe">Presentation (mappe)</h5>
<p><strong>Ansvar</strong>: UI-laget, der hÃ¥ndterer input og output fra brugeren via API'en.</p>
<p><strong>API</strong> (Class library)
Kalder applikationslaget (fx UserService) for at udfÃ¸re handlinger og returnere resultater til klienten.</p>
<pre><code class="lang-HTML">Presentation/
â”œâ”€â”€ API/
â”‚   â””â”€â”€ UserController
</code></pre>
<h5 id="infrastructure-mappe">Infrastructure (mappe)</h5>
<p><strong>Ansvar</strong>: Implementerer tekniske detaljer, sÃ¥som datatilgang eller eksterne services.</p>
<p><strong>Infrastructure</strong> (Class library project)
Implementerer generelle infrastrukturtjeneste interfaces fra domain-laget</p>
<p><strong>Repositories</strong> (Class library project)<br>
Implementerer Repository interfaces fra domain-laget for at kommunikere med databasen.</p>
<p><strong>Persistence</strong> (Class library project)
Database relaterede klasser</p>
<pre><code class="lang-HTML">Infrastructure/
â”œâ”€â”€ Infrastructure/
â”‚   â””â”€â”€ Logger
    â””â”€â”€ FileStorageService
    â””â”€â”€ EmmailService
â”œâ”€â”€ Repositories/
â”‚   â””â”€â”€ UserRepository
â”œâ”€â”€ Persistence/
â”‚   â”œâ”€â”€ DbContext
â”‚   â””â”€â”€ Migrations
</code></pre>
<h5 id="core-mappe">Core (mappe)</h5>
<p><strong>Ansvar</strong>: Forretningslogik og applikationsregler.</p>
<p><strong>Interfaces</strong> (Class library project)
Interfaces til datatilgang, sÃ¥ domain-laget er uafhÃ¦ngigt af infrastrukturen.</p>
<ul>
<li><strong>RepositoryInterfaces</strong> (mappe)
Indeholder interfaces til repositories, som muliggÃ¸r datatilgang og gÃ¸r domain-laget uafhÃ¦ngigt af den konkrete databaseimplementering.</li>
<li><strong>ServiceInterfaces</strong> (mappe)
Indeholder interfaces til services, som definerer forretningslogik og gÃ¸r domain-laget uafhÃ¦ngigt af konkrete serviceimplementeringer.</li>
<li><strong>InfrastructureInterfaces</strong> (mappe)
Indeholder interfaces til infrastrukturtjenester som logning, filopbevaring og email-tjenester, hvilket gÃ¸r domain-laget uafhÃ¦ngigt af konkrete infrastrukturtjenester.</li>
</ul>
<p><strong>Entities</strong> (Class library project)
DomÃ¦ne-entiteter, der reprÃ¦senterer konkrete ting i systemet.</p>
<p><strong>Application</strong> (Class library project)
Indeholder forretningslogik relateret til DomÃ¦ne-entiteter og kalder et relateret repository til datatilgang.</p>
<pre><code class="lang-HTML">Core/
â”œâ”€â”€ Domain/
â”‚   â”œâ”€â”€ Interfaces/
â”‚   â”‚   â”œâ”€â”€ RepositoryInterfaces
â”‚   â”‚   â”‚   â””â”€â”€ IUserInterface
â”‚   â”‚   â””â”€â”€ ServiceInterfaces
â”‚   â”‚   â”‚   â””â”€â”€ IUserService
â”‚   â”‚   â””â”€â”€ InfrastructureInterfaces
â”‚   â”‚       â””â”€â”€ ILogger
â”‚   â”‚       â””â”€â”€ FileStorageService
â”‚   â”‚       â””â”€â”€ EmmailService
â”‚   â””â”€â”€ Entities/
â”‚       â””â”€â”€ User
â”œâ”€â”€ Application/
â”‚   â””â”€â”€ UserService

</code></pre>
<h5 id="shared-class-library-project">Shared (Class Library Project)</h5>
<p><strong>Ansvar</strong>: OverfÃ¸rer data mellem lag.</p>
<p><strong>UserDto (mappe)</strong><br>
Indeholder dataoverfÃ¸rselsobjekter relateret til brugere og inkluderer valideringslogik.</p>
<pre><code class="lang-HTML">â”œâ”€â”€Shared/
â””â”€â”€ UserDto/
    â””â”€â”€ CreateUserDto
        â””â”€â”€ CreateUserDto.CreateUserDtoValidator
</code></pre>
<h5 id="modelering">Modelering</h5>
<p>Det er muligt at modelerere pÃ¥ low-level, som [indsÃ¦t nogle navne pÃ¥ low-level diagrammer] niveau da man allerede har fastlagt programmeringsmÃ¸nstre der skal fÃ¸lges.
Hvis fokus er pÃ¥ low-level design, sÃ¥ Ã¸ger det kompleksiten ved at sikre sporbarhed imellem design diagrammer og kode.
En interesant bekymrer sig typisk ikke om hvordan at koden er implementeret, men har fokus pÃ¥ interactivitet.
Low-level design bÃ¸r derfor kun benyttes, hvis en en udvikler vil modelere for at fÃ¥ et overblik over en feature, inden at den bliver implementeret.</p>
<h5 id="tests">Tests</h5>
<p>Det er muligt at planlÃ¦gge unit tests allerede inden at man har implementeret koden, da man ved hvilke dele der skal testes og hvad der skal testes for.
Hvilket gÃ¸r det muligt for UTDD(TODO: internt link &quot;Unit Test Driven Design&quot;).</p>
<p>Da det primÃ¦re mÃ¥l er at kunne skifte hele implementationen of Core laget ud, som er der hvor at alt forretningslogikken er placeret, er det ikke nok kun at dÃ¦kke det med interfaces.
Interfaces sikrer en meget begrÃ¦nset kontrakt til dens implimentation, da den kun sÃ¸rger for at retur type og argumenter bliver inplementeret.
Den sikrer dermed en 'happy path', men sikrer ikke 'edge cases'.
Ved at unit teste interfaces, kan man sikre at 'edge cases' ogsÃ¥ bliver sikret, hvis man har dÃ¦kket alle interfaces i Core laget, med et Core test projekt.</p>
</section>
<section id="tabpanel_1_vertical-slice-arkitektur" role="tabpanel" data-tab="vertical-slice-arkitektur" aria-hidden="true" hidden="hidden">

<p>Man deler koden op i lodrette snit, typisk per feature, som er placeret i 1 folder.
I en serverside applikation hvor at bÃ¥de front- og backend kÃ¸rer pÃ¥ serveren, kan et snit bestÃ¥ af en Blazor komponent og alt loggiken der hÃ¸rer til den specifike komponent.
I en WebAssembly applikation, som er delt op i flere projekter, vil man have foldere med det samme navn i hver projekt, som har alt hvad der er hÃ¸rer til den specifike feature.</p>
<p><strong>Fordele</strong><br>
Det er nemmere at overskue en feature nÃ¥r det hele ligger i den samme folder, i stedet for at den er spredt over flere foldere og projekter.
I tilfÃ¦lde at et distribueret system med et Client, Server og Shared projekt, kommer man ikke uden om at det bliver spredt ud, men det er stadig begrÃ¦nset og folderne hedder det samme og er delt op pÃ¥ samme mÃ¥de.</p>
<p>Da koden er delt op per feature bliver det nemmere, for udviklere der er nye til kodebasen, at sÃ¦tte sig ind i hvordan den fungere.</p>
<p>Det bliver nemmere at debugge koden da alt relevant kode er samlet i den samme folder.</p>
<p>Der er ingen kobling imellem de forskellige feature snit, sÃ¥ en Ã¦ndring i et snit kommer ikke til at pÃ¥virke et andet. Det har ingen sideeffekter, som er en ting der fÃ¥r det til at lÃ¸be koldt ned af ryggen pÃ¥ mange udviklere, nÃ¥r de skal skubbe kode til production.
Udviklere er mere frie til at implimentere den konkrete kode og lÃ¸se problemerne pÃ¥ en mÃ¥de de mener er bedst. En feature kan ses som en black box, hvor at man kan sende et request og fÃ¥ et response.
Man kan med sikker hÃ¥nd implementere integration tests (TODO: Acceptence tests (automatiserede) ?), der gÃ¥r pÃ¥ tvÃ¦rs af forskellige dele af systemet, pÃ¥ det hÃ¸jeste niveau, da den berÃ¸rte kode er samlet 1 sted. Som nÃ¦vnt under (TODO: Ligger det her under tests eller hvor ?) <a href="Tests.html">tests</a>, sÃ¥ er de dele af koden som bliver brugt pÃ¥ tvÃ¦rs af snittene unit testet.</p>
<p>Man <strong>KAN</strong> bruge unit tests i en feature, men det er ikke pÃ¥krÃ¦vet for at sikre sig at brugerens krav er overholdt.
Eksempler pÃ¥ hvor at det kunne vÃ¦re en fordel at implementere en unit test, kunne vÃ¦re hvis man har en meget kompleks metode/funktion, hvor man sÃ¥ kan kÃ¸re den test for at se om den virker efter hensigten, frem for at skulle debugge den hver gang at man laver en Ã¦ndring i den. Det er dog mere op til den enkelte udviklers prÃ¦ference, frem for et overordnet krav.
Man kan sammenligne det med at unit teste private metoder:
En privat metode understÃ¸tter en public metode og er derved en del af implementeringen af den public metode.
PÃ¥ samme mÃ¥de er en metode i et snit, med til at understÃ¸tte en feature i at overholde kravende.</p>
<p>Pull request: Det er nemt at se hvad der er Ã¦ndret tilbage i tiden da koden er samlet i de samme folder/foldere. PÃ¥ samme mÃ¥de er det ogsÃ¥ mere overskueligt at godkende en pull request.</p>
<p><strong>Ulemper</strong><br>
Da der ikke er nogen kode delt imellem lagene, vil man kunne komme ud for at skulle gentage sig selv ğŸ˜±, det taler imod <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> ( gentag ikke dig selv ). Regler er til for at brydes, og hvis man er en erfaren udvikler, vil man vide at det ikke alt tid giver mening at vÃ¦re regelrytter.</p>
<p>Delt forretningslogik vil man dog presse ned i domÃ¦ne laget, i de tilfÃ¦lde hvor det giver mening. TODO: ( SE: Hvordan man udvikler en feature )</p>
<h4 id="vertical-slice-eksempel">Vertical Slice eksempel</h4>
<p><strong>Interactive Server</strong></p>
<p>Man kan implementere hver feature sÃ¥ den passer bedst.
I den simpleste form vil der bare vÃ¦re en component, men det er op til udvikleren at implementere en feature sÃ¥ den passer bedst.</p>
<img src="/images/VSA_InteractiveServer.png" alt="drawing" width="40%">
<p><strong>Interactive WebAssembly</strong></p>
<img src="/images/VSA_InteractiveWebAssembly.png" alt="drawing" width="40%">
<p>I den simpleste form er en feature en folder i <strong>Client</strong>, med en komponent, og koden skrives i kode blokken.
I den simpleste form er en feature en folder i <strong>Server</strong> med et endpoint.
I den simpleste form er en feature en folder i <strong>Shared</strong> en DTO, til at transportere data imellem <strong>Client</strong> og <strong>Server</strong>.</p>
<p><strong>TODO:</strong>
SKRIV OM SÃ… DET PASSER FOR VSA:
&quot;Jeg har inkludered eksempler pÃ¥ klasser i mapperne, for at illustrerer hvordan det ser ud i en meget lille applikation.
Man kan tÃ¦nke sig til hvordan svÃ¦rhedsgraden, i at finde rundt i de forskellige mapper, stiger liniÃ¦rt, i takt med at applikationen vokser.
Ikke kun pÃ¥ grund af antallet af mapper, men ogsÃ¥ pga antallet a filer der er i hver mappe.</p>
<p>I eksemplet har jeg lÃ¦net mig op af High Cohesion/Low Coupling, da relaterede emdpoints er samlet i en UserController, Service metoder er samlet i en UserService osv.
Der er low coupling i mellem lagene, via interfaces.</p>
<p>Fordelen ved at bruge class library projects er at hver del kan have deres egen afhÃ¦ngigheder og er isolerede i det enkelte class library project.
For eksempel er EF Core Nuget pakken isoleret i <strong>Persistence</strong> projektet i <strong>Infrastructure</strong> mappen.&quot;</p>
<p><strong>Infrastructure (mappe)</strong><br>
Indeholder infrastrukturtjenester som logning, filopbevaring og email-tjenester.</p>
<p><strong>Persistence (mappe)</strong><br>
Indeholder database relaterede klasser</p>
<p><strong>Domain (mappe)</strong><br>
DomÃ¦ne-entiteter, der reprÃ¦senterer konkrete ting i systemet.</p>
<pre><code class="lang-HTML">Infrastructure/
â”‚ â”œâ”€â”€ Logger
â”‚ â”œâ”€â”€ FileStorageService
â”‚ â””â”€â”€ EmmailService
Persistence/
â”‚ â”œâ”€â”€ DbContext
â”‚ â””â”€â”€ Migrations
Domain/
â”‚ â”œâ”€â”€ User
Features/
â”œâ”€â”€ User
</code></pre>
<p><strong>Features (mappe)</strong><br>
Eksemplerne illusterer at en udvikler er fri til at implementerer koden som det passer bedst for den enkelte brugssag.</p>
<p>I et simpelt brugstilfÃ¦lde kan man nÃ¸jes med at implementere koden i et endpoint.</p>
<p><strong>Eksempel 1</strong></p>
<pre><code class="lang-HTML">â”œâ”€â”€ Features/
â”‚   â”œâ”€â”€ User
â”‚   â”‚   â”œâ”€â”€ Create
â”‚   â”‚   â”‚   â””â”€â”€ Endpoint.cs
</code></pre>
<p>I et mere komplekst brugstilfÃ¦lde kan det vÃ¦re at det giver mere mening at dele koden op i mindre bider, for at Ã¸ge lÃ¦sbarheden.
I nogle tilfÃ¦lde kan det vÃ¦re at man har et komplekst data access object som man gerne vil lave en unit test til, sÃ¥ man er fri for at debugge det manuelt, for at vÃ¦re sikker pÃ¥ at det er implementeret korrekt.</p>
<p><strong>Eksempel 2</strong></p>
<pre><code class="lang-HTML">â”œâ”€â”€ Features/
â”‚   â”œâ”€â”€ User
â”‚   â”‚   â”œâ”€â”€ Create
â”‚   â”‚   â”‚   â”œâ”€â”€ Endpoint.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ Repository.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ IRepository.cs
â”‚   â”‚   â”‚   â”œâ”€â”€ Mapper.cs 
â”‚   â”‚   â”‚   â””â”€â”€ Service.cs
</code></pre>
<h5 id="shared-class-library-project-1">Shared (Class library Project)</h5>
<p><strong>Ansvar</strong>: OverfÃ¸rer data mellem lag.</p>
<p><strong>UserDto (mappe)</strong><br>
Indeholder dataoverfÃ¸rselsobjekter relateret til brugere og inkluderer valideringslogik.</p>
<pre><code class="lang-HTML">â”œâ”€â”€Shared/
â””â”€â”€ UserDto/
    â””â”€â”€ CreateUserDto
        â””â”€â”€ CreateUserDto.CreateUserDtoValidator
</code></pre>
<h5 id="modelering-1">Modelering</h5>
<p>Man kan holde det simpelt og fokusere pÃ¥ high-level diagrammer og pÃ¥ hvad interesanten gerne vil med applikationen.
Det er mere effektivt at lade udvikleren, der skal implementere en feature, om detaljerne.
Derved kan man lade koden diktere hvordan at den skal implementeres(link til Jimmi Bogard video).</p>
<p>Det er muligt at modelere pÃ¥ et low-level niveau, men oftest er det mere effektivt at bruge en [TDD](internt link) tilgang til endpoints, og sÃ¥ [lade koden diktere hvordan en feature skal implementeres](link til Jimmi Bogard video).</p>
<p>Derved kan man have mere tid og fokus pÃ¥ high-level diagrammer som betyder noget for interesanten, da de som oftest ikke har interesse i at vide hvordan at koden er implementeret.</p>
<h5 id="tests-1">Tests</h5>
<p>Da hver feature mappe er isoleret fra de andre, kan man nemt debugge en feature for at finde en mulig fejl. NÃ¥r man Ã¦ndrer i koden, og fÃ¥r rettet op pÃ¥ fejlen, sÃ¥ er man sikker pÃ¥ at det ikke har sideeffekter til andre features.</p>
<p>Den mest effektive tilgang til tests ved VSA er en [ATDD](TODO:internt link) tilgang, med fokus pÃ¥ endpoints.
Man kan, men bÃ¸r ikke fokusere pÃ¥ [unit tests](TODO: internt link), med mindre at man har komplekse objekter, hvor at det kan vÃ¦re tidsbesparende at skrive en test fÃ¸rst, i stedet for at debugge for at vÃ¦re sikker pÃ¥ at den gÃ¸r som den skal.</p>
<p>Da de forskellige features har adgang til domÃ¦ne laget, er det vÃ¦rdifuldt at unit teste alt foretnings logik i domÃ¦ne laget, for at sikre sig at den gÃ¸r som den skal. 1 fejl i domÃ¦net kan have sideeffekter i flere features og vil ikke vÃ¦re isoleret til domÃ¦net selv.</p>
</section>
</div>

<p>Man ser ofte, nÃ¥r man lÃ¦ser om arkitektur, at en bestemt arkitektur passe godt til en bestemt stÃ¸rrelse.
Baseret pÃ¥ hvor kompleks den er, hvor nem den er at overskue, hvad teamet kender til, eller andre udvikler baserede parametre.
Men det er som nÃ¦vnt baseret pÃ¥ hvad man tÃ¦nker som udvikler.</p>
<p>Det der burde vÃ¦re i fokus er ikke noget af det overnÃ¦vnte, men hvad kravene til applikationen er og hvad der passer sig bedst til applikationen. Jo mere kompliseret applikationen er, jo mere koster det at udvikle og vedligeholde.</p>
<p>Ting der kan Ã¸ge omkstningerne og som man skal overveje inden:</p>
<ul>
<li>Navigere og overskue koden (man bruger mere tid pÃ¥ at lÃ¦se kode en at skrive den)</li>
<li>TilfÃ¸je en ny feature</li>
<li>Ã†ndre pÃ¥ en feature</li>
<li>Antal af tests</li>
<li>Antallet af abstraktioner</li>
<li>MÃ¦ngde af kode</li>
</ul>
<pre><code class="lang-mermaid">xychart-beta
  title &quot;Omkostninger per feature&quot;
  x-axis &quot;Features (Antal)&quot; [0, 10, 20, 30, 40, 50, 60,70, 80, 90, 100]
  y-axis &quot;Omkostninger&quot; 0 --&gt; 10000
  line [1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10.000]
  line [2000, 4000, 6000, 8000, 10.000, 12.000, 14.000, 16.000, 18.000, 20.000]
</code></pre>
<p>Som udgangspunkt er det en go' ide at holde det simpelt(KISS link), og man skal ikke spekulere pÃ¥ hvad det mÃ¥ske kan udvikle sig til engang i fremtiden (YAGNY link), da det som udgangspunkt vil komplisere kodebasen og kompleksitet koster penge i implementering og vedligehold.
Der skal derfor vÃ¦re en meget god grund til at man vÃ¦lger Clean Architektur, for at kunne retfÃ¦rdigÃ¸re den Ã¸gede kompleksitet.</p>
<p>Med arkitektur i fokus, sÃ¥ er Vertical Slice rchitecture den mest simple at starte ud med.
Hver skive har 1 fokusomrÃ¥de og alt hvad den skive skal have er samlet i 1 folder.
Hvis man engang i fremtiden skulle fÃ¥ brug for at genbruge domÃ¦ne delen af applikationen, sÃ¥ kan man opdatere 1 skive af gangen, indtil at man have et domÃ¦ne der kan skilles fra resten af applikationen, udrulles og deles pÃ¥ tvÃ¦rs af andre projekter.</p>
<p>Repositories har sine fordele men er ikke altid bydende nÃ¸dvendige. IsÃ¦r ikke nÃ¥r man kan bruge en ORM(Object Relational Mapper) som <a href="https://learn.microsoft.com/en-us/ef/core/">EF CORE</a>, der fungerer som data access lag til en database.
Skulle man fÃ¥ brug for at skifte til en anden database (YAGNY), sÃ¥ understÃ¸tter EF CORE mange <a href="https://learn.microsoft.com/en-us/ef/core/providers/?tabs=dotnet-core-cli">forskellige</a> allerede via DbContext.</p>
<p>NÃ¥r man afsÃ¸ger kravene til applikationen, kan man i modeleringsfasen, dele applikationen op i dele som i <a href="/docs/Udvikling.html?tabs=fdd%2Ccontroller#tabpanel_1_fdd">Feature Driven Development</a>
'Theme', 'Epic', 'Feature' og 'User Story', som sÃ¥ kan afspejle mappe strukturen i applikationen, hvilket giver sporbarhed imellem modelen og applikationen.
Udover at give sporbarhed, sÃ¥ er der heller ikke sÃ¥ giver det, som applikationen udvikler og udvider sig, en klar afgrÃ¦nsning af domÃ¦net. Noget som ellers kan vÃ¦re svÃ¦rt at nÃ¥ til enighed i et team.
PÃ¥ sigt kan, hvis applikationen bliver stor nok og det giver mening, en del af applikationen nemt skilles fra og hÃ¥ndteres som sin egen service, der kan bruges i andre applikationer.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/dadaPipes/dadapipes.github.io/blob/main/docs/Arkitektur.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
